(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{180:function(e,a,t){"use strict";t.r(a);var o=t(4),r=t(37),n=t(38),l=t(40),m=t(39),c=t(41),s=t(2),i=t.n(s),u=t(21),p=t(42),d=t(354),E=t(355),g=t(204),f=t(353),b=t(356),h=t(207),v=t(229),N=t(209),S=t(47),F=function(e){var a=e.produto.foto_jpg?S.a.urlImagens+e.produto.foto_jpg:S.a.imagemPadrao;return i.a.createElement(d.a,{xs:"6",sm:"6",md:"4",lg:"4",xl:"4",className:"animated fadeIn"},i.a.createElement(E.a,null,i.a.createElement(g.a,null,i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"10",sm:"10",md:"10",lg:"10",xl:"10",className:"text-truncate"},e.produto.produto),i.a.createElement(d.a,{xs:"2",sm:"2",md:"2",lg:"2",xl:"2"},i.a.createElement("div",{className:"card-header-actions",title:"Visibilidade do produto"},i.a.createElement(N.n,{className:"float-right mx-1",color:"success",outline:!0,label:!0,dataOn:"\u2713",dataOff:"\u2715",checked:e.produto.situacao,onClick:function(){return e.alterarProduto(e.produto,!e.produto.situacao)},size:"sm"}))))),i.a.createElement(b.a,null,i.a.createElement("img",{src:a,style:{width:"100%",height:"auto"},alt:e.produto.produto}),i.a.createElement("p",null,e.produto.situacao,"Codigo de barras: ",e.produto.codbar,i.a.createElement("br",null),e.produto.grupo," ",e.produto.categoria&&"| ".concat(e.produto.categoria),i.a.createElement("br",null),"Marca: ",e.produto.marca?e.produto.marca:"--",i.a.createElement("br",null),"Embalagem: ",e.produto.embalagem)),i.a.createElement(h.a,null,i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"4",sm:"4",md:"4"},i.a.createElement(v.a,{color:"ghost-dark",size:"sm",onClick:function(){return e.formProduto({})}},i.a.createElement("i",{className:"fa fa-pencil-square-o"}),"\xa0Novo")),i.a.createElement(d.a,{xs:"4",sm:"4",md:"4"},i.a.createElement(v.a,{color:"ghost-dark",size:"sm",onClick:function(){return e.formProduto(e.produto)}},i.a.createElement("i",{className:"fa fa-pencil-square-o"}),"\xa0alterar")),i.a.createElement(d.a,{xs:"4",sm:"4",md:"4"},i.a.createElement(v.a,{color:"ghost-dark",size:"sm",onClick:function(){return e.alterarImagem(e.produto)}},i.a.createElement("i",{className:"fa fa-picture-o"}),"\xa0Foto"))))))},P=t(362),x=t(246),C=t(247),O={estados:[{nome:"Acre",sigla:"AC"},{nome:"Alagoas",sigla:"AL"},{nome:"Amap\xe1",sigla:"AP"},{nome:"Amazonas",sigla:"AM"},{nome:"Bahia",sigla:"BA"},{nome:"Cear\xe1",sigla:"CE"},{nome:"Distrito Federal",sigla:"DF"},{nome:"Esp\xedrito Santo",sigla:"ES"},{nome:"Goi\xe1s",sigla:"GO"},{nome:"Maranh\xe3o",sigla:"MA"},{nome:"Mato Grosso",sigla:"MT"},{nome:"Mato Grosso do Sul",sigla:"MS"},{nome:"Minas Gerais",sigla:"MG"},{nome:"Par\xe1",sigla:"PA"},{nome:"Para\xedba",sigla:"PB"},{nome:"Paran\xe1",sigla:"PR"},{nome:"Pernambuco",sigla:"PE"},{nome:"Piau\xed",sigla:"PI"},{nome:"Rio de Janeiro",sigla:"RJ"},{nome:"Rio Grande do Norte",sigla:"RN"},{nome:"Rio Grande do Sul",sigla:"RS"},{nome:"Rond\xf4nia",sigla:"RO"},{nome:"Roraima",sigla:"RR"},{nome:"Santa Catarina",sigla:"SC"},{nome:"S\xe3o Paulo",sigla:"SP"},{nome:"Sergipe",sigla:"SE"},{nome:"Tocantins",sigla:"TO"}],grupos:[{nome:"A\xc7OUGUE"},{nome:"BAZAR"},{nome:"BEB\xca"},{nome:"BEBIDAS"},{nome:"CONGELADO"},{nome:"CONGELADOS"},{nome:"ELETRO"},{nome:"FRIOS E LATIC\xcdNIOS"},{nome:"HIGIENE E BELEZA"},{nome:"HORTIFRUTI"},{nome:"INFANTIL"},{nome:"LIMPEZA"},{nome:"MERCEARIA"},{nome:"PADARIA"},{nome:"PETSHOP"}]},w=t(205),I=t(206),A=t(342),y=t(343),j=Object(C.a)({form:"formFiltros",enableReinitialize:!0})(function(e){var a=e.handleSubmit;return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:a,className:"form"},i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"2"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"situacao"},"Quais listar?"),i.a.createElement(x.a,{component:"select",className:"form-control",name:"situacao"},i.a.createElement("option",{value:"todos"},"Todos"),i.a.createElement("option",{value:!0},"Dispon\xedveis"),i.a.createElement("option",{value:!1},"Ocultos")))),i.a.createElement(d.a,{xs:"3"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"grupos"},"Grupos"),i.a.createElement(x.a,{component:"select",className:"form-control",name:"grupos",multiple:!0},i.a.createElement("option",{value:"todos"},"Todos"),i.a.createElement("option",{value:""},"Sem grupos"),O.grupos.map(function(e,a){return i.a.createElement("option",{value:e.nome,key:a},e.nome)})))),i.a.createElement(d.a,{xs:"3"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"marcas"},"Marcas"),i.a.createElement(x.a,{component:"select",className:"form-control",name:"marcas",multiple:!0},i.a.createElement("option",{value:"todos"},"Todos"),i.a.createElement("option",{value:""},"Sem marcas")))),i.a.createElement(d.a,{xs:"2"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"limit"},"\xcdtens por p\xe1gina"),i.a.createElement(x.a,{component:"select",className:"form-control",name:"limit"},[15,30,45,60,90,150,200,300,500,1e3].map(function(e,a){return i.a.createElement("option",{value:e,key:a},e)})))),i.a.createElement(d.a,{xs:"2"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"order"},"Ordernar"),i.a.createElement(x.a,{component:"select",className:"form-control",name:"order",value:"asc"},i.a.createElement("option",{value:"asc"},"A - Z"),i.a.createElement("option",{value:"desc"},"Z - A"))))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"7"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"pesquisar"},"Pesquisar"),i.a.createElement(x.a,{component:"input",className:"form-control",name:"pesquisar"}))),i.a.createElement(d.a,{xs:"3"},i.a.createElement(w.a,null,i.a.createElement(I.a,null,"\xa0"),i.a.createElement(A.a,null,i.a.createElement(y.a,null,i.a.createElement(v.a,{disabled:1===e.page,onClick:function(){return e.prevPage()}},"<")),i.a.createElement(y.a,null,i.a.createElement(v.a,null,e.page,"/",e.pages)),i.a.createElement(y.a,null,i.a.createElement(v.a,{disabled:e.page===e.pages,onClick:function(){return e.nextPage()}},">"))))),i.a.createElement(d.a,{xs:"2"},i.a.createElement(w.a,null,i.a.createElement(I.a,null,"\xa0"),i.a.createElement(x.a,{component:v.a,name:"submit",type:"submit",color:"success",block:!0},"Aplicar filtros ",i.a.createElement("i",{className:"fa fa-check"})))))))}),k=t(244),B=t.n(k),R=t(245),M=t(52),T=function(){var e=Object(R.a)(B.a.mark(function e(a){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.produtoCodBar(a.codbar).then(function(e){if(e.codbar===a.codbar&&!a._id)throw{codbar:"Codigo de barras j\xe1 utilizado",_error:"Codigo de barras j\xe1 utilizado"}});case 2:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),G=function(e){var a=e.input,t=e.label,o=e.type,r=e.classN,n=e.meta,l=n.asyncValidating,m=n.touched,c=n.error;return i.a.createElement("div",null,i.a.createElement("input",Object.assign({},a,{type:o,placeholder:t,className:r+(l?"async-validating":"")})),m&&c&&i.a.createElement(P.a,{color:"danger"},c))},q=Object(C.a)({form:"formProduto",validate:function(e){var a={};return e.codbar||(a.codbar="Obrigat\xf3rio"),e.produto||(a.produto="Obrigat\xf3rio"),e.categoria||(a.categoria="Obrigat\xf3rio"),a},asyncValidate:T,asyncBlurFields:"codbar",enableReinitialize:!0})(function(e){var a=e.handleSubmit,t=e.show,o=e.error,r=e.pristine,n=e.submitting;return t&&i.a.createElement("div",{className:"animated fadeIn"},i.a.createElement("form",{onSubmit:a,className:"form"},i.a.createElement(d.a,{xs:"12",sm:"11",md:"9",lg:"8",xl:"5"},i.a.createElement(E.a,null,i.a.createElement(g.a,null,i.a.createElement("strong",null,"Produto"),i.a.createElement("small",null," |",e.initialValues._id?" alterar":" novo")),i.a.createElement(b.a,null,o&&i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(P.a,{color:"danger"},o))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"8"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"codbar"},"C\xf3digo de Barras"),i.a.createElement(x.a,{type:"text",name:"codbar",label:"C\xf3digo de Barras",component:G,classN:"form-control",required:!0}))),i.a.createElement(d.a,{xs:"4"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"situacao"},"Situa\xe7\xe3o"),i.a.createElement(x.a,{component:"select",className:"form-control",name:"situacao"},i.a.createElement("option",{value:"true"},"Ativo"),i.a.createElement("option",{value:"false"},"Inativo"))))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"produto"},"Nome do Produto"),i.a.createElement(x.a,{type:"text",name:"produto",placeholder:"Nome do produto",component:"input",className:"form-control",required:!0})))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"marca"},"Marca do produto"),i.a.createElement(x.a,{type:"text",name:"marca",placeholder:"Marca do produto",component:"input",className:"form-control"})))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"grupo"},"Grupo"),i.a.createElement(x.a,{component:"select",className:"form-control",name:"grupo",required:!0},i.a.createElement("option",{value:""},"Selecione um grupo"),O.grupos.map(function(e,a){return i.a.createElement("option",{value:e.nome,key:a},e.nome)}))))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"categoria"},"Categoria"),i.a.createElement(x.a,{type:"text",name:"categoria",placeholder:"categoria do produto",AutoComplete:"on",component:"input",className:"form-control"})))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"tags"},"Tags | ",i.a.createElement("small",null,"Separe as tags com ','")),i.a.createElement(x.a,{type:"text",name:"tags",placeholder:"tag1, tag2, tagQualquer",AutoComplete:"on",component:"input",className:"form-control"})))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"embalagem"},"Embalagem"),i.a.createElement(x.a,{type:"text",name:"embalagem",placeholder:"Embalagem do produto: unidade, pacote, caixa",component:"input",className:"form-control"})))),i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"quantidade_embalagem"},"Quantidade em cada embalagem"),i.a.createElement(x.a,{type:"text",name:"quantidade_embalagem",placeholder:"Quantidade em cada embalagem",component:"input",className:"form-control"}))))),i.a.createElement(h.a,null,i.a.createElement(x.a,{component:v.a,name:"submit",type:"submit",size:"sm",disabled:n||r,color:"primary"},i.a.createElement("i",{className:"fa fa-dot-circle-o"})," Salvar"),i.a.createElement("button",{onClick:function(){return e.onCancel()},className:"btn-square btn btn-danger btn-sm"}," ",i.a.createElement("i",{className:"fa close"})," Cancelar"))))))}),z=t(44),L=function(e){return function(a){return e(a.target.files[0])}},_=function(e){var a=e.input,t=(a.value,a.onChange),o=a.onBlur,r=(Object(z.a)(a,["value","onChange","onBlur"]),e.meta,Object(z.a)(e,["input","meta"]));return i.a.createElement("input",Object.assign({onChange:L(t),onBlur:L(o),accept:"*.jpg *.jpeg *.png",type:"file"},r.input,r))},D=Object(C.a)({form:"formImage",enableReinitialize:!0})(function(e){var a=e.handleSubmit;return e.show&&i.a.createElement("div",{className:"buttons fadein"},i.a.createElement("form",{onSubmit:a,className:"form"},i.a.createElement(E.a,null,i.a.createElement(g.a,null,i.a.createElement("strong",null," ",e.initialValues.produto),i.a.createElement("small",null," | troca de imagem")),i.a.createElement(b.a,null,i.a.createElement(f.a,null,i.a.createElement(d.a,{xs:"12"},i.a.createElement(w.a,null,i.a.createElement(I.a,{htmlFor:"arquivo"},"Selecione uma imagem"),i.a.createElement(x.a,{name:"arquivo",component:_,type:"file"}))))),i.a.createElement(h.a,null,i.a.createElement(x.a,{component:v.a,name:"submit",type:"submit",size:"sm",color:"primary"},i.a.createElement("i",{className:"fa fa-dot-circle-o"})," Salvar"),i.a.createElement("button",{onClick:function(){return e.onCancel()},className:"btn-square btn btn-danger btn-sm"}," ",i.a.createElement("i",{className:"fa close"})," Cancelar")))))}),V=function(e){function a(){var e,t;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(c)))).submit=function(e){t.props.onSetFiltros(e)},t.mudarPagina=function(e){t.props.onLoadProdutos({pagina:e})},t.alterarSituacaoProduto=function(e,a){e.situacao=a,t.props.onAlterarProduto(e)},t.formProduto=function(e){t.props.onPopularForm(e),t.props.produtos.produtoShowForm||t.props.onShowForm()},t.alterarImagem=function(e){t.props.onPopularForm(e),t.props.produtos.showFormImage||t.props.onShowFormImage(),t.props.produtos.produtoShowForm&&t.props.onShowForm()},t.enviarImagem=function(e){e&&(t.props.onUploadImage(e),t.props.produtos.showFormImage&&t.props.onShowFormImage(),t.props.produtos.produtoShowForm&&t.props.onShowForm(),t.props.onSetFiltros(t.props.produtos.filtros))},t.salvarProduto=function(e){e.tags=e.tags.split(","),t.produtoCodBar(e.codbar),t.props.produtos.produto&&(t.props.produtos.produto._id?(t.props.onAlterarProduto(e),t.props.produtos.produtoShowForm&&t.props.onShowForm(),t.props.onSetFiltros(t.props.produtos.filtros)):(t.props.onCadastrarProduto(e),t.props.produtos.produtoShowForm&&t.props.onShowForm(),t.props.onSetFiltros(t.props.produtos.filtros)))},t.produtoCodBar=function(e){t.props.onGetCodBar(e)},t.prevPage=function(){var e=t.props.produtos,a=e.page,r=e.filtros;if(1!==a){var n=a-1,l=Object(o.a)({},r,{pagina:n});t.props.onSetFiltros(l)}},t.nextPage=function(){var e=t.props.produtos,a=e.page,r=e.pages,n=e.filtros;if(a!==r){var l=a+1,m=Object(o.a)({},n,{pagina:l});t.props.onSetFiltros(m)}},t}return Object(c.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){var e={listar:"todos",situacao:"todos",grupos:["todos"],marcas:["todos"],limit:30,order:"asc",pagina:1},a=JSON.parse(localStorage.getItem("filtros"));e=a||e,this.props.onSetFiltros(e)}},{key:"render",value:function(){var e=this,a=this.props.produtos,t=a.loading,o=a.produtoShowForm,r=a.showFormImage;return i.a.createElement("div",{className:"animated fadeIn"},a.produto&&r&&i.a.createElement(D,{initialValues:a.produto,show:r,onCancel:this.props.onShowFormImage,onSubmit:this.enviarImagem}),a.produto&&o&&i.a.createElement(q,{show:o,initialValues:a.produto,onCancel:this.props.onShowForm,onSubmit:this.salvarProduto,onGetCodBar:this.produtoCodBar}),!o&&!r&&i.a.createElement(f.a,null,i.a.createElement(d.a,{xl:12},i.a.createElement(E.a,null,i.a.createElement(g.a,null,i.a.createElement("i",{className:"fa fa-align-justify"})," ",i.a.createElement("strong",{className:"card-title"},"Produtos")),i.a.createElement(b.a,null,i.a.createElement(j,{onSubmit:this.submit,initialValues:a.filtros,page:a.page,pages:a.pages,prevPage:this.prevPage,nextPage:this.nextPage}))))),!o&&!r&&i.a.createElement(f.a,null,t&&i.a.createElement(P.a,{color:"success",xs:"12",sm:"12",md:"12",lg:"12",xl:"12"},"carregando..."),a.docs&&!t&&a.docs.map(function(a,t){return i.a.createElement(F,{produto:a,alterarProduto:e.alterarSituacaoProduto,alterarImagem:e.alterarImagem,formProduto:e.formProduto,key:a._id})}),0===a.total&&i.a.createElement(P.a,{color:"info",xs:"12"},"Nenhum produto foi encontrado. Tente outro filtro!")))}}]),a}(s.Component);a.default=Object(u.b)(function(e){return{produtos:e.produtos}},function(e){return{onLoadProdutos:function(a){return e(p.d.getProdutos(a))},onSetFiltros:function(a){return e(p.d.setFiltros(a))},onAlterarProduto:function(a){return e(p.d.produtoUpdate(a))},onCadastrarProduto:function(a){return e(p.d.produtoCreate(a))},onShowForm:function(){return e(p.d.showForm())},onShowFormImage:function(){return e(p.d.showFormImage())},onPopularForm:function(a){return e(p.d.popularForm(a))},onUploadImage:function(a){return e(p.d.imagemUpload(a))},onGetCodBar:function(a){return e(p.d.produtoCodBar(a))}}})(V)},342:function(e,a,t){"use strict";var o=t(16),r=t(193),n=t(2),l=t.n(n),m=t(3),c=t.n(m),s=t(191),i=t.n(s),u=t(192),p={children:c.a.node,className:c.a.string,listClassName:c.a.string,cssModule:c.a.object,size:c.a.string,tag:u.h,listTag:u.h,"aria-label":c.a.string},d=function(e){var a,t=e.className,n=e.listClassName,m=e.cssModule,c=e.size,s=e.tag,p=e.listTag,d=e["aria-label"],E=Object(r.a)(e,["className","listClassName","cssModule","size","tag","listTag","aria-label"]),g=Object(u.e)(i()(t),m),f=Object(u.e)(i()(n,"pagination",((a={})["pagination-"+c]=!!c,a)),m);return l.a.createElement(s,{className:g,"aria-label":d},l.a.createElement(p,Object(o.a)({},E,{className:f})))};d.propTypes=p,d.defaultProps={tag:"nav",listTag:"ul","aria-label":"pagination"},a.a=d},343:function(e,a,t){"use strict";var o=t(16),r=t(193),n=t(2),l=t.n(n),m=t(3),c=t.n(m),s=t(191),i=t.n(s),u=t(192),p={active:c.a.bool,children:c.a.node,className:c.a.string,cssModule:c.a.object,disabled:c.a.bool,tag:u.h},d=function(e){var a=e.active,t=e.className,n=e.cssModule,m=e.disabled,c=e.tag,s=Object(r.a)(e,["active","className","cssModule","disabled","tag"]),p=Object(u.e)(i()(t,"page-item",{active:a,disabled:m}),n);return l.a.createElement(c,Object(o.a)({},s,{className:p}))};d.propTypes=p,d.defaultProps={tag:"li"},a.a=d}}]);
//# sourceMappingURL=17.82a75b61.chunk.js.map